<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 8 How to Write Functions | R Programming in Plain English</title>
  <meta name="description" content="A simple guide to R programming for those without programming experience" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 8 How to Write Functions | R Programming in Plain English" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="A simple guide to R programming for those without programming experience" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 8 How to Write Functions | R Programming in Plain English" />
  
  <meta name="twitter:description" content="A simple guide to R programming for those without programming experience" />
  

<meta name="author" content="Taylor Rodgers" />


<meta name="date" content="2021-09-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="packages.html"/>
<link rel="next" href="importdata.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.4.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R Programming in Plain English</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> About This Book</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#things-you-should-know-before-reading"><i class="fa fa-check"></i><b>1.1</b> Things You Should Know Before Reading</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="whatisr.html"><a href="whatisr.html"><i class="fa fa-check"></i><b>2</b> What is R Programming?</a><ul>
<li class="chapter" data-level="2.1" data-path="whatisr.html"><a href="whatisr.html#is-r-the-best-statistical-programming-language"><i class="fa fa-check"></i><b>2.1</b> Is R the Best Statistical Programming Language?</a></li>
<li class="chapter" data-level="2.2" data-path="whatisr.html"><a href="whatisr.html#how-will-learning-r-versus-python-impact-my-job-opportunities"><i class="fa fa-check"></i><b>2.2</b> How Will Learning R versus Python Impact My Job Opportunities?</a></li>
<li class="chapter" data-level="2.3" data-path="whatisr.html"><a href="whatisr.html#things-to-remember"><i class="fa fa-check"></i><b>2.3</b> Things to Remember</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="setup.html"><a href="setup.html"><i class="fa fa-check"></i><b>3</b> Getting Setup in R and RStudio</a><ul>
<li class="chapter" data-level="3.1" data-path="setup.html"><a href="setup.html#how-to-download-r"><i class="fa fa-check"></i><b>3.1</b> How to Download R</a></li>
<li class="chapter" data-level="3.2" data-path="setup.html"><a href="setup.html#understanding-base-rs-user-interface"><i class="fa fa-check"></i><b>3.2</b> Understanding Base R’s User Interface</a></li>
<li class="chapter" data-level="3.3" data-path="setup.html"><a href="setup.html#limitations-of-r-base"><i class="fa fa-check"></i><b>3.3</b> Limitations of R Base</a></li>
<li class="chapter" data-level="3.4" data-path="setup.html"><a href="setup.html#what-is-rstudio"><i class="fa fa-check"></i><b>3.4</b> What is RStudio?</a></li>
<li class="chapter" data-level="3.5" data-path="setup.html"><a href="setup.html#how-to-download-rstudio"><i class="fa fa-check"></i><b>3.5</b> How to Download RStudio</a></li>
<li class="chapter" data-level="3.6" data-path="setup.html"><a href="setup.html#understanding-rstudio-interface"><i class="fa fa-check"></i><b>3.6</b> Understanding RStudio Interface</a></li>
<li class="chapter" data-level="3.7" data-path="setup.html"><a href="setup.html#things-to-remember-1"><i class="fa fa-check"></i><b>3.7</b> Things to Remember</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="objects.html"><a href="objects.html"><i class="fa fa-check"></i><b>4</b> R Objects Types</a><ul>
<li class="chapter" data-level="4.1" data-path="objects.html"><a href="objects.html#why-do-objects-matter"><i class="fa fa-check"></i><b>4.1</b> Why Do Objects Matter?</a></li>
<li class="chapter" data-level="4.2" data-path="objects.html"><a href="objects.html#understanding-object-types-makes-it-easier-to-transform-and-analyze"><i class="fa fa-check"></i><b>4.2</b> Understanding Object Types Makes It Easier to Transform and Analyze</a></li>
<li class="chapter" data-level="4.3" data-path="objects.html"><a href="objects.html#the-basic-objects-to-remember"><i class="fa fa-check"></i><b>4.3</b> The Basic Objects to Remember</a></li>
<li class="chapter" data-level="4.4" data-path="objects.html"><a href="objects.html#vectors"><i class="fa fa-check"></i><b>4.4</b> Vectors</a></li>
<li class="chapter" data-level="4.5" data-path="objects.html"><a href="objects.html#matrices-and-arrays"><i class="fa fa-check"></i><b>4.5</b> Matrices and Arrays</a></li>
<li class="chapter" data-level="4.6" data-path="objects.html"><a href="objects.html#data-frames"><i class="fa fa-check"></i><b>4.6</b> Data Frames</a></li>
<li class="chapter" data-level="4.7" data-path="objects.html"><a href="objects.html#factors"><i class="fa fa-check"></i><b>4.7</b> Factors</a></li>
<li class="chapter" data-level="4.8" data-path="objects.html"><a href="objects.html#lists"><i class="fa fa-check"></i><b>4.8</b> Lists</a></li>
<li class="chapter" data-level="4.9" data-path="objects.html"><a href="objects.html#functions"><i class="fa fa-check"></i><b>4.9</b> Functions</a></li>
<li class="chapter" data-level="4.10" data-path="objects.html"><a href="objects.html#things-to-remember-2"><i class="fa fa-check"></i><b>4.10</b> Things to Remember</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="baserfilter.html"><a href="baserfilter.html"><i class="fa fa-check"></i><b>5</b> How to Filter and Transform Data in Base R</a><ul>
<li class="chapter" data-level="5.1" data-path="baserfilter.html"><a href="baserfilter.html#what-are-operators"><i class="fa fa-check"></i><b>5.1</b> What Are Operators?</a></li>
<li class="chapter" data-level="5.2" data-path="baserfilter.html"><a href="baserfilter.html#how-to-filter-and-transform-data-from-a-vector"><i class="fa fa-check"></i><b>5.2</b> How to Filter and Transform Data From a Vector</a></li>
<li class="chapter" data-level="5.3" data-path="baserfilter.html"><a href="baserfilter.html#how-to-filter-and-transform-data-from-a-matrix"><i class="fa fa-check"></i><b>5.3</b> How to Filter and Transform Data From a Matrix</a></li>
<li class="chapter" data-level="5.4" data-path="baserfilter.html"><a href="baserfilter.html#how-to-filter-and-transform-data-from-arrays"><i class="fa fa-check"></i><b>5.4</b> How to Filter and Transform Data from Arrays</a></li>
<li class="chapter" data-level="5.5" data-path="baserfilter.html"><a href="baserfilter.html#how-to-filter-and-transform-data-from-a-data-frame"><i class="fa fa-check"></i><b>5.5</b> How to Filter and Transform Data from a Data Frame</a></li>
<li class="chapter" data-level="5.6" data-path="baserfilter.html"><a href="baserfilter.html#how-to-filter-a-list"><i class="fa fa-check"></i><b>5.6</b> How to Filter a List</a></li>
<li class="chapter" data-level="5.7" data-path="baserfilter.html"><a href="baserfilter.html#things-to-remember-3"><i class="fa fa-check"></i><b>5.7</b> Things to Remember</a></li>
<li class="chapter" data-level="5.8" data-path="baserfilter.html"><a href="baserfilter.html#exercises"><i class="fa fa-check"></i><b>5.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="dplyr.html"><a href="dplyr.html"><i class="fa fa-check"></i><b>6</b> How to Filter and Transform Data with the Dplyr Package</a><ul>
<li class="chapter" data-level="6.1" data-path="dplyr.html"><a href="dplyr.html#why-is-dplyr-so-popular"><i class="fa fa-check"></i><b>6.1</b> Why is <code>dplyr</code> So Popular?</a></li>
<li class="chapter" data-level="6.2" data-path="dplyr.html"><a href="dplyr.html#its-still-worth-learning-base-r"><i class="fa fa-check"></i><b>6.2</b> It’s Still Worth Learning Base R</a></li>
<li class="chapter" data-level="6.3" data-path="dplyr.html"><a href="dplyr.html#the-dplyr-syntax"><i class="fa fa-check"></i><b>6.3</b> The <code>dplyr</code> Syntax</a></li>
<li class="chapter" data-level="6.4" data-path="dplyr.html"><a href="dplyr.html#understand-the-difference-between-selecting-and-filtering"><i class="fa fa-check"></i><b>6.4</b> Understand the Difference Between Selecting and Filtering</a></li>
<li class="chapter" data-level="6.5" data-path="dplyr.html"><a href="dplyr.html#how-to-select-and-mutate-a-data-frame-with-dplyr-in-r"><i class="fa fa-check"></i><b>6.5</b> How to Select and Mutate a Data Frame with <code>dplyr</code> in R</a></li>
<li class="chapter" data-level="6.6" data-path="dplyr.html"><a href="dplyr.html#how-to-filter-a-data-frame-with-dplyr-in-r"><i class="fa fa-check"></i><b>6.6</b> How to Filter a Data Frame with <code>dplyr</code> in R</a></li>
<li class="chapter" data-level="6.7" data-path="dplyr.html"><a href="dplyr.html#how-to-summarize-and-group-data-with-dplyr-in-r"><i class="fa fa-check"></i><b>6.7</b> How to Summarize and Group Data with <code>dplyr</code> in R</a></li>
<li class="chapter" data-level="6.8" data-path="dplyr.html"><a href="dplyr.html#things-to-remember-4"><i class="fa fa-check"></i><b>6.8</b> Things to Remember</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i><b>7</b> Understanding and Using R Packages</a><ul>
<li class="chapter" data-level="7.1" data-path="packages.html"><a href="packages.html#why-does-r-use-packages"><i class="fa fa-check"></i><b>7.1</b> Why Does R Use Packages?</a></li>
<li class="chapter" data-level="7.2" data-path="packages.html"><a href="packages.html#how-to-access-r-packages"><i class="fa fa-check"></i><b>7.2</b> How to Access R Packages</a></li>
<li class="chapter" data-level="7.3" data-path="packages.html"><a href="packages.html#how-to-install-and-load-a-package---the-easy-way"><i class="fa fa-check"></i><b>7.3</b> How to Install and Load a Package - The Easy Way</a></li>
<li class="chapter" data-level="7.4" data-path="packages.html"><a href="packages.html#why-you-should-still-learn-to-install-and-load-packages-the-old-fashioned-way"><i class="fa fa-check"></i><b>7.4</b> Why You Should Still Learn to Install and Load Packages the “Old Fashioned” Way</a></li>
<li class="chapter" data-level="7.5" data-path="packages.html"><a href="packages.html#how-to-install-and-load-r-packages---the-old-fashioned-way"><i class="fa fa-check"></i><b>7.5</b> How to Install and Load R Packages - The Old Fashioned Way</a></li>
<li class="chapter" data-level="7.6" data-path="packages.html"><a href="packages.html#a-simple-trick-to-include-install-and-load-any-packages-needed"><i class="fa fa-check"></i><b>7.6</b> A Simple Trick to Include Install and Load Any Packages Needed</a></li>
<li class="chapter" data-level="7.7" data-path="packages.html"><a href="packages.html#how-to-find-new-packages-to-install"><i class="fa fa-check"></i><b>7.7</b> How to Find New Packages to Install</a></li>
<li class="chapter" data-level="7.8" data-path="packages.html"><a href="packages.html#how-to-find-documentation-on-packages"><i class="fa fa-check"></i><b>7.8</b> How to Find Documentation on Packages</a></li>
<li class="chapter" data-level="7.9" data-path="packages.html"><a href="packages.html#things-to-remember-5"><i class="fa fa-check"></i><b>7.9</b> Things to Remember</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="function.html"><a href="function.html"><i class="fa fa-check"></i><b>8</b> How to Write Functions</a><ul>
<li class="chapter" data-level="8.1" data-path="function.html"><a href="function.html#two-approaches-to-using-r-functions"><i class="fa fa-check"></i><b>8.1</b> Two Approaches to Using R Functions</a></li>
<li class="chapter" data-level="8.2" data-path="function.html"><a href="function.html#why-you-should-learn-to-write-your-own-functions"><i class="fa fa-check"></i><b>8.2</b> Why You Should Learn to Write Your Own Functions</a></li>
<li class="chapter" data-level="8.3" data-path="function.html"><a href="function.html#the-components-of-an-r-function"><i class="fa fa-check"></i><b>8.3</b> The Components of an R Function</a></li>
<li class="chapter" data-level="8.4" data-path="function.html"><a href="function.html#required-versus-non-required-arguments"><i class="fa fa-check"></i><b>8.4</b> Required versus Non-Required Arguments</a></li>
<li class="chapter" data-level="8.5" data-path="function.html"><a href="function.html#when-order-matters-for-arguments"><i class="fa fa-check"></i><b>8.5</b> When Order Matters for Arguments</a></li>
<li class="chapter" data-level="8.6" data-path="function.html"><a href="function.html#how-to-write-your-own-function"><i class="fa fa-check"></i><b>8.6</b> How to Write Your Own Function</a></li>
<li class="chapter" data-level="8.7" data-path="function.html"><a href="function.html#writing-functions-using-control-flows"><i class="fa fa-check"></i><b>8.7</b> Writing Functions Using Control Flows</a></li>
<li class="chapter" data-level="8.8" data-path="function.html"><a href="function.html#applying-a-control-flow-to-our-summary-stats-function"><i class="fa fa-check"></i><b>8.8</b> Applying a Control Flow to Our Summary Stats Function</a></li>
<li class="chapter" data-level="8.9" data-path="function.html"><a href="function.html#breaking-down-the-function-we-just-made"><i class="fa fa-check"></i><b>8.9</b> Breaking Down the Function We Just Made</a></li>
<li class="chapter" data-level="8.10" data-path="function.html"><a href="function.html#things-to-remember-6"><i class="fa fa-check"></i><b>8.10</b> Things to Remember</a></li>
<li class="chapter" data-level="8.11" data-path="function.html"><a href="function.html#exercises-1"><i class="fa fa-check"></i><b>8.11</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="importdata.html"><a href="importdata.html"><i class="fa fa-check"></i><b>9</b> Importing Data into R</a><ul>
<li class="chapter" data-level="9.1" data-path="importdata.html"><a href="importdata.html#how-to-import-a-raw-data-file-the-easy-way"><i class="fa fa-check"></i><b>9.1</b> How to Import a Raw Data File the Easy Way</a></li>
<li class="chapter" data-level="9.2" data-path="importdata.html"><a href="importdata.html#import-a-raw-data-file-the-hard-way"><i class="fa fa-check"></i><b>9.2</b> Import a Raw Data File the Hard Way</a></li>
<li class="chapter" data-level="9.3" data-path="importdata.html"><a href="importdata.html#save-import-functions"><i class="fa fa-check"></i><b>9.3</b> Save Import Functions</a></li>
<li class="chapter" data-level="9.4" data-path="importdata.html"><a href="importdata.html#connect-to-a-database"><i class="fa fa-check"></i><b>9.4</b> Connect to a Database</a></li>
<li class="chapter" data-level="9.5" data-path="importdata.html"><a href="importdata.html#connect-to-an-api"><i class="fa fa-check"></i><b>9.5</b> Connect to an API</a></li>
<li class="chapter" data-level="9.6" data-path="importdata.html"><a href="importdata.html#things-to-remember-7"><i class="fa fa-check"></i><b>9.6</b> Things to Remember</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="plotdata.html"><a href="plotdata.html"><i class="fa fa-check"></i><b>10</b> How to Plot Data in R</a><ul>
<li class="chapter" data-level="10.1" data-path="plotdata.html"><a href="plotdata.html#which-r-plot-package-is-best"><i class="fa fa-check"></i><b>10.1</b> Which R Plot Package is Best?</a></li>
<li class="chapter" data-level="10.2" data-path="plotdata.html"><a href="plotdata.html#so-which-data-viz-package-is-actually-the-best"><i class="fa fa-check"></i><b>10.2</b> So Which Data Viz Package is Actually the Best?</a></li>
<li class="chapter" data-level="10.3" data-path="plotdata.html"><a href="plotdata.html#how-to-write-ggplot2-scripts"><i class="fa fa-check"></i><b>10.3</b> How to Write ggplot2 Scripts</a></li>
<li class="chapter" data-level="10.4" data-path="plotdata.html"><a href="plotdata.html#how-to-plot-common-data-visualizations-in-ggplot2"><i class="fa fa-check"></i><b>10.4</b> How to Plot Common Data Visualizations in ggplot2</a><ul>
<li class="chapter" data-level="10.4.1" data-path="plotdata.html"><a href="plotdata.html#how-to-plot-a-scatterplot"><i class="fa fa-check"></i><b>10.4.1</b> How to Plot a Scatterplot</a></li>
<li class="chapter" data-level="10.4.2" data-path="plotdata.html"><a href="plotdata.html#how-to-plot-a-bar-graph-histogram"><i class="fa fa-check"></i><b>10.4.2</b> How to Plot a Bar Graph / Histogram</a></li>
<li class="chapter" data-level="10.4.3" data-path="plotdata.html"><a href="plotdata.html#how-to-plot-a-line-graph"><i class="fa fa-check"></i><b>10.4.3</b> How to Plot a Line Graph</a></li>
<li class="chapter" data-level="10.4.4" data-path="plotdata.html"><a href="plotdata.html#how-to-plot-a-box-and-whiskers-plot"><i class="fa fa-check"></i><b>10.4.4</b> How to Plot a Box-and-Whiskers Plot</a></li>
<li class="chapter" data-level="10.4.5" data-path="plotdata.html"><a href="plotdata.html#how-to-improve-labels-and-other-formatting-tips"><i class="fa fa-check"></i><b>10.4.5</b> How to Improve Labels and Other Formatting Tips</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="plotdata.html"><a href="plotdata.html#things-to-remember-8"><i class="fa fa-check"></i><b>10.5</b> Things to Remember</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="answers.html"><a href="answers.html"><i class="fa fa-check"></i><b>11</b> Answer Key</a><ul>
<li class="chapter" data-level="11.1" data-path="answers.html"><a href="answers.html#chapter-3"><i class="fa fa-check"></i><b>11.1</b> Chapter 3</a></li>
<li class="chapter" data-level="11.2" data-path="answers.html"><a href="answers.html#chapter-5"><i class="fa fa-check"></i><b>11.2</b> Chapter 5</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R Programming in Plain English</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="function" class="section level1">
<h1><span class="header-section-number">Chapter 8</span> How to Write Functions</h1>
<p>As I said a few chapters ago, R programming runs on objects. Most object types relate to the way data is stored and how it’s handled. There’s one object type, though, that’s unique compared to the others.</p>
<p>That would be the <strong>function</strong> object type.</p>
<p>R functions allow you to script out various commands to transform and analyze data. This can be as simple as taking data from a vector and outputting a data frame. Or it could be something as complicated as a machine learning algorithm!</p>
<p>It all depends on your own R programming goals.</p>
<div id="two-approaches-to-using-r-functions" class="section level2">
<h2><span class="header-section-number">8.1</span> Two Approaches to Using R Functions</h2>
<p>There’s two approaches that you can take with functions:</p>
<ol style="list-style-type: decimal">
<li>use an existing function</li>
<li>write your own function</li>
</ol>
<p>Both methods use the same underlying structure.</p>
<p>The more common functions you’ll use include those in the R <strong>base</strong> and <strong>stats</strong> packages. These automatically come with R. These functions perform common calculations needed for statistical programming, such as <code>mean()</code>, <code>sum()</code>, <code>sd()</code>, <code>lm()</code>, <code>glm()</code> and <code>confint()</code>.</p>
<p>Other “existing” functions can include those developed by other R programmers, which you can access by installing and loading other packages. (See the chapter on R packages for more details)</p>
</div>
<div id="why-you-should-learn-to-write-your-own-functions" class="section level2">
<h2><span class="header-section-number">8.2</span> Why You Should Learn to Write Your Own Functions</h2>
<p>R is flexible enough though that you can write your own functions as well. This might sound like more trouble than it’s worth, but it’s really not. It takes a lot of time to learn other people’s functions. Not only that, you have to verify that their functions perform accurately. That’s especially true for packages developed by lesser known organizations.</p>
<p>Sadly, not every package out there goes through rigorous quality checks and much of the documentation is poorly written. So it’s easy to misunderstand how a function works and then use it incorrectly.</p>
<p>As a matter of fact, my professor in my machine learning class suggested creating our own scripts for some more advanced machine learning processes because existing packages didn’t work in every context. This is the trade off with open source programming languages.</p>
</div>
<div id="the-components-of-an-r-function" class="section level2">
<h2><span class="header-section-number">8.3</span> The Components of an R Function</h2>
<p>Regardless of whether you use an existing function or write your own, both require the same components to execute: <strong>argument</strong> and a <strong>value</strong>.</p>
<p>These are the technical terms for it, but it might be easier to think of an argument as the <strong>input</strong> and the value as the <strong>output</strong>.</p>
<p>Fortunately, R documentation tells you what the required arguments are for existing functions. Simply add a question mark <code>?</code> before a function and the documentation will appear in the <strong>Help</strong> tab on the bottom right pane of RStudio.</p>
<p><img src="1.48_Function_Documentation.png" width="50%" style="display: block; margin: auto;" /></p>
<p>Try it yourself with these functions:</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="function.html#cb207-1"></a>?mean</span>
<span id="cb207-2"><a href="function.html#cb207-2"></a>?sd</span>
<span id="cb207-3"><a href="function.html#cb207-3"></a>?cor</span>
<span id="cb207-4"><a href="function.html#cb207-4"></a>?confint</span></code></pre></div>
<p>In the example of the <code>mean</code> function, we see that it requires at least an <code>x</code> value. The <strong>Arguments</strong> section of the documentation states that x is merely an R object.</p>
<p><img src="1.48.0_Function_Documentation.png" width="50%" style="display: block; margin: auto;" /></p>
<p>We can see the <strong>Value</strong> section gives details on the output this function will generate.</p>
<p><img src="1.49_Function_Documentation.png" width="50%" style="display: block; margin: auto;" /></p>
</div>
<div id="required-versus-non-required-arguments" class="section level2">
<h2><span class="header-section-number">8.4</span> Required versus Non-Required Arguments</h2>
<p>You may have noticed in the documentation for the <code>mean()</code> function that there were two other arguments: trim and na.rm. The <code>mean()</code> function still can execute, even if you don’t specify what those arguments are. The reason is that there’s a <em>default</em> setting already in place for them.</p>
<p><img src="1.48.1_Function_Documentation.png" width="50%" style="display: block; margin: auto;" /></p>
<p>Whoever created this function set the default for the <em>trim</em> to <code>0</code> and the <em>na.rm</em> argument to <code>FALSE</code>. That way the user only has to modify those arguments if it’s necessary.</p>
</div>
<div id="when-order-matters-for-arguments" class="section level2">
<h2><span class="header-section-number">8.5</span> When Order Matters for Arguments</h2>
<p>If you execute <code>?lm</code> in your console, you’ll see the linear model function has argument options for <em>formula, data, subset, weights</em>, etc. That means we could execute the model using our Bond data as <code>lm(gross~actor,bond)</code>. Even though we don’t specify the arguments, R will execute this function because the formula argument (<code>gross~actor</code>) and the data argument (<code>bond</code>) are placed in the correct order.</p>
<p>You can see this order in the documentation:</p>
<p><img src="1.50_Function_Documentation.png" width="50%" style="display: block; margin: auto;" /></p>
<p>If we tried this backwards, it wouldn’t work. Executing <code>lm(bond,gross~actor)</code> in your console would throw up an error. However, if we specify the arguments with an equal <code>=</code> sign, it will execute. That would look like this: <code>lm(data=bond,formula=gross~actor)</code>.</p>
</div>
<div id="how-to-write-your-own-function" class="section level2">
<h2><span class="header-section-number">8.6</span> How to Write Your Own Function</h2>
<p>As you may have noticed, existing R functions require at least one argument (with the option for more) and typically displays at least one values as an output. If you write your own functions, they’ll need the same thing.</p>
<p>According to R’s own base documentation, a function is defined by an assignment, such as:</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="function.html#cb208-1"></a>name &lt;-<span class="st"> </span><span class="cf">function</span>(arg_<span class="dv">1</span>, arg_<span class="dv">2</span>, …) expression</span></code></pre></div>
<p>We’re going to follow this convention and create several functions, with each one becoming more and more complex.</p>
<p>Our end goal will be to create a function that:</p>
<ol style="list-style-type: decimal">
<li>takes a data set</li>
<li>groups data based on a single categorical variable</li>
<li>calculates the mean and standard deviation of a continuous variable</li>
</ol>
<p>But we’ll start with a simpler version of this first.</p>
<p>Before we begin though, go ahead and reload James Bond data set, as we’ll use it in our examples later.</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="function.html#cb209-1"></a>bond &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/taylorrodgers/bond/main/bond.csv&quot;</span>)</span></code></pre></div>
<p>Our first function will calculate standard deviation for a continuous variable. This function actually exists already (<code>?sd</code>), but we want to become familiar with something simple before moving on to something that’s more complicated.</p>
<p>First, we’ll need a name for the function and any arguments we know will need to be passed through. We know it’ll require a data frame and a field to calculate standard deviation. I call those <code>data</code> and <code>field</code>, respectively. I name the function <code>sd.simple</code>.</p>
<p>You can see in the script below the template for a function and the new name and arguments that I replaced it with.</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="function.html#cb210-1"></a><span class="co"># Template  </span></span>
<span id="cb210-2"><a href="function.html#cb210-2"></a>name &lt;-<span class="st"> </span><span class="cf">function</span>(arg_<span class="dv">1</span>, arg_<span class="dv">2</span>, …) expression </span>
<span id="cb210-3"><a href="function.html#cb210-3"></a><span class="co"># New function</span></span>
<span id="cb210-4"><a href="function.html#cb210-4"></a>sd.simple &lt;-<span class="st"> </span><span class="cf">function</span>(data, field) expression </span></code></pre></div>
<p>Now we’ll need to calculate add an <strong>expression</strong>. An expression is the actual script that takes your arguments and uses them to execute certain tasks. Our expression will need to use the data frame, grouping variable, and calculate standard deviation.</p>
<p>To start the expression part of a new function, we use the <code>{}</code> notations:</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="function.html#cb211-1"></a>sd.simple &lt;-<span class="st"> </span><span class="cf">function</span>(data, field) {</span>
<span id="cb211-2"><a href="function.html#cb211-2"></a>}</span></code></pre></div>
<p>Next, we need the function to evaluate the data frame that’s placed in the <code>data</code> argument and select the <code>field</code> that’s specified. To do this, we use the same methods we used for selecting data from a data frame. (Note: when you design functions, it’s important to keep in mind the type of objects that will be entered into a function.)</p>
<p>Now if we’re selecting a field directly from the <strong>Bond</strong> data frame we created earlier, our script would look something like this:</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="function.html#cb212-1"></a>bond[,<span class="st">&quot;gross&quot;</span>]</span></code></pre></div>
<p>Since I want this function to be able to evaluate any data frame and field inputted, I simply replace certain parts of the script with the arguments. That means I replace “bond” with “data” and “gross” with “field,” which were the arguments I specified when I started writing this function. See what I mean below:</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="function.html#cb213-1"></a>sd.simple &lt;-<span class="st"> </span><span class="cf">function</span>(data,field) {</span>
<span id="cb213-2"><a href="function.html#cb213-2"></a>  field &lt;-<span class="st"> </span>data[,<span class="kw">paste</span>(field)]</span>
<span id="cb213-3"><a href="function.html#cb213-3"></a>}</span></code></pre></div>
<p>Now you probably realized that I actually replaced “gross” with <code>paste(field)</code>. The <code>paste()</code> function is a handy little tool when it comes to writing your own R functions. It allows you to inject an argument into a filtering command. So when we later specify our <code>field</code> argument to be “gross”, it’ll simply plug that argument into the function to filter the data frame.</p>
<p>It probably confused you why we’re assigning an object the name <strong>field</strong> when we’ve already specified that as an argument. This will be more clear later, but it’s because the <strong>field</strong> argument is used to specify a variable within a data frame - not an existing R object. To make it easier to analyze in our next part of the function, we need to turn it into it’s own object.</p>
<p>Next, we need to write a script to calculate standard devation. We’ll use the <em>sample standard deviation</em> equation, which is:</p>
<p><span class="math display">\[
 \sqrt{\frac{\sum{(X_i-\bar{X})^2}}{n-1}}
\]</span></p>
<p>And we’ll plug that into our function:</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="function.html#cb214-1"></a>sd.simple &lt;-<span class="st"> </span><span class="cf">function</span>(data,field) {</span>
<span id="cb214-2"><a href="function.html#cb214-2"></a>  field &lt;-<span class="st"> </span>data[,<span class="kw">paste</span>(field)]</span>
<span id="cb214-3"><a href="function.html#cb214-3"></a>  <span class="kw">sqrt</span>(<span class="kw">sum</span>((field <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(field))<span class="op">^</span><span class="dv">2</span>)</span>
<span id="cb214-4"><a href="function.html#cb214-4"></a>       <span class="op">/</span><span class="st"> </span>(<span class="kw">length</span>(field) <span class="op">-</span><span class="st"> </span><span class="dv">1</span>))</span>
<span id="cb214-5"><a href="function.html#cb214-5"></a>}</span></code></pre></div>
<p>And walla! We created our first function! To execute this function, we simply plug our arguments into the function.</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="function.html#cb215-1"></a><span class="kw">sd.simple</span>(bond,<span class="st">&quot;gross&quot;</span>)</span></code></pre></div>
<pre><code>## [1] 214.4881</code></pre>
<p>If you notice, I put quotation marks around the field argument “gross”. That’s because that argument is used with filtering a data frame, which requires quotation marks when we filter down to a column by column name (i.e. <code>data.frame[,"column name"]</code>). If we were using column number, we wouldn’t need to use a quotation mark (i.e. <code>data.frame[,n]</code>).</p>
<p>We can check our work against the existing <code>sd()</code> function already built into R to make sure we did it correctly.</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="function.html#cb217-1"></a><span class="kw">sd.simple</span>(bond,<span class="st">&quot;gross&quot;</span>) <span class="op">==</span><span class="st"> </span><span class="kw">sd</span>(bond[,<span class="st">&quot;gross&quot;</span>])</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Looks like we got it right!</p>
</div>
<div id="writing-functions-using-control-flows" class="section level2">
<h2><span class="header-section-number">8.7</span> Writing Functions Using Control Flows</h2>
<p>The truth is that you typically won’t need to write short functions like this one because there’s plenty of existing functions in base R that perform these kinds of calculations. The functions you’ll need to write are able to evaluate large amounts of data and run calculations on subsets of said data. That’s where things get tricky and where function writing is both a benefit and challenge.</p>
<p>That’s where the <strong>control flow</strong> comes in handy. Some people call them “loops,” which I think is an easier term myself. A control flow simply repeats a calculation over and over again for certain subgroups. Even though this is easy to conceive, it’s a challenge to implement it without lots of thought and planning.</p>
<p>There’s several different types of control flows, which you can read up by executing <code>?Control</code> in your console.</p>
<p>The one we’ll use is the <code>for (var in seq) expr</code> version. It’s hard to visualize how that works, unless we provide an example. Down below I create a loop that prints each individual word in the <code>statement</code> vector until we reach the end.</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="function.html#cb219-1"></a>statement &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;This&quot;</span>,<span class="st">&quot;book&quot;</span>,<span class="st">&quot;is&quot;</span>,<span class="st">&quot;the&quot;</span>,<span class="st">&quot;greatest&quot;</span>,</span>
<span id="cb219-2"><a href="function.html#cb219-2"></a>               <span class="st">&quot;book&quot;</span>,<span class="st">&quot;ever&quot;</span>,<span class="st">&quot;and&quot;</span>,<span class="st">&quot;I&quot;</span>,<span class="st">&quot;will&quot;</span>,</span>
<span id="cb219-3"><a href="function.html#cb219-3"></a>               <span class="st">&quot;recommend&quot;</span>,<span class="st">&quot;it&quot;</span>,<span class="st">&quot;to&quot;</span>,<span class="st">&quot;everyone&quot;</span>)</span>
<span id="cb219-4"><a href="function.html#cb219-4"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(statement)) {</span>
<span id="cb219-5"><a href="function.html#cb219-5"></a>  <span class="kw">print</span>(statement[i])</span>
<span id="cb219-6"><a href="function.html#cb219-6"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;This&quot;
## [1] &quot;book&quot;
## [1] &quot;is&quot;
## [1] &quot;the&quot;
## [1] &quot;greatest&quot;
## [1] &quot;book&quot;
## [1] &quot;ever&quot;
## [1] &quot;and&quot;
## [1] &quot;I&quot;
## [1] &quot;will&quot;
## [1] &quot;recommend&quot;
## [1] &quot;it&quot;
## [1] &quot;to&quot;
## [1] &quot;everyone&quot;</code></pre>
<p>First, I create the vector. Then I said print every <code>i</code> entry of the vector until we reach the end. Even though this is a simple example, you can see why this would be useful in larger, more complicated scripting.</p>
</div>
<div id="applying-a-control-flow-to-our-summary-stats-function" class="section level2">
<h2><span class="header-section-number">8.8</span> Applying a Control Flow to Our Summary Stats Function</h2>
<p>Now we’re going to build upon our previous function with a control flow and use it to report both standard deviation and the average of a subgroup within a larger data frame. We’ll demonstrate this using the <strong>Bond</strong> data frame and report those summary statistics for each Bond actor’s net gross.</p>
<p>First, to make sure it’s easy to visualize what we’re doing, I’m going to replace our own <em>standard deviation</em> script with the built-in <code>sd()</code> function. I’m also going to add the built-in <code>mean()</code> function and rename the function to “summary.group”.</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="function.html#cb221-1"></a>summary.group &lt;-<span class="st"> </span><span class="cf">function</span>(data,field) {</span>
<span id="cb221-2"><a href="function.html#cb221-2"></a>  field &lt;-<span class="st"> </span>data[,<span class="kw">paste</span>(field)]</span>
<span id="cb221-3"><a href="function.html#cb221-3"></a>  <span class="kw">sd</span>(field)</span>
<span id="cb221-4"><a href="function.html#cb221-4"></a>  <span class="kw">mean</span>(field)</span>
<span id="cb221-5"><a href="function.html#cb221-5"></a>}</span></code></pre></div>
<p>Next, I’m going to replace the <strong>field</strong> assignment with <strong>groups</strong> and <strong>output</strong>.</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="function.html#cb222-1"></a>summary.group &lt;-<span class="st"> </span><span class="cf">function</span>(data, group, field) {</span>
<span id="cb222-2"><a href="function.html#cb222-2"></a>  groups &lt;-<span class="st"> </span><span class="kw">levels</span>(<span class="kw">factor</span>(data[,<span class="kw">paste</span>(group)]))</span>
<span id="cb222-3"><a href="function.html#cb222-3"></a>  output &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">group=</span><span class="kw">character</span>(),</span>
<span id="cb222-4"><a href="function.html#cb222-4"></a>                       <span class="dt">mean=</span><span class="kw">numeric</span>(),</span>
<span id="cb222-5"><a href="function.html#cb222-5"></a>                       <span class="dt">sd=</span><span class="kw">numeric</span>())</span>
<span id="cb222-6"><a href="function.html#cb222-6"></a>  <span class="kw">sd</span>(field)</span>
<span id="cb222-7"><a href="function.html#cb222-7"></a>  <span class="kw">mean</span>(field)</span>
<span id="cb222-8"><a href="function.html#cb222-8"></a>}</span></code></pre></div>
<p>The <strong>groups</strong> object creates a short vector that specifies the groups we want to evaluate. Since we’ll evaluate the actors in the Bond data frame, this would be Daniel Craig, Sean Connery, etc. It works similarly to the previous field object assignment we had.</p>
<p>The <strong>output</strong> object is an empty data frame that will populate with our summary statistics, such as mean and standard deviation, as the control flow evaluates each subgroup. We want to create an empty data frame before the control flow, otherwise the control flow will continuously overwrite itself.</p>
<p>Now we’ll begin our control flow. Down below I add the control flow and it evaluates each individual group found at the beginning of the function:</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="function.html#cb223-1"></a>summary.group &lt;-<span class="st"> </span><span class="cf">function</span>(data,group,field) {</span>
<span id="cb223-2"><a href="function.html#cb223-2"></a>  groups &lt;-<span class="st"> </span><span class="kw">levels</span>(<span class="kw">factor</span>(data[,<span class="kw">paste</span>(group)]))</span>
<span id="cb223-3"><a href="function.html#cb223-3"></a>  output &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">group=</span><span class="kw">character</span>(),</span>
<span id="cb223-4"><a href="function.html#cb223-4"></a>                       <span class="dt">mean=</span><span class="kw">numeric</span>(),</span>
<span id="cb223-5"><a href="function.html#cb223-5"></a>                       <span class="dt">sd=</span><span class="kw">numeric</span>())</span>
<span id="cb223-6"><a href="function.html#cb223-6"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(groups)) {</span>
<span id="cb223-7"><a href="function.html#cb223-7"></a>    <span class="co">#sd(field) - can&#39;t run properly yet</span></span>
<span id="cb223-8"><a href="function.html#cb223-8"></a>    <span class="co">#mean(field) - can&#39;t run properly yet</span></span>
<span id="cb223-9"><a href="function.html#cb223-9"></a>    }</span>
<span id="cb223-10"><a href="function.html#cb223-10"></a>  }</span></code></pre></div>
<p>Now we’ll want to update the output data frame with the group name, the mean, and the standard deviation:</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb224-1"><a href="function.html#cb224-1"></a>summary.group &lt;-<span class="st"> </span><span class="cf">function</span>(data,group,field) {</span>
<span id="cb224-2"><a href="function.html#cb224-2"></a>  groups &lt;-<span class="st"> </span><span class="kw">levels</span>(<span class="kw">factor</span>(data[,<span class="kw">paste</span>(group)]))</span>
<span id="cb224-3"><a href="function.html#cb224-3"></a>  output &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">group=</span><span class="kw">character</span>(),</span>
<span id="cb224-4"><a href="function.html#cb224-4"></a>                       <span class="dt">mean=</span><span class="kw">numeric</span>(),</span>
<span id="cb224-5"><a href="function.html#cb224-5"></a>                       <span class="dt">sd=</span><span class="kw">numeric</span>())</span>
<span id="cb224-6"><a href="function.html#cb224-6"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(groups)) {</span>
<span id="cb224-7"><a href="function.html#cb224-7"></a>    subdata &lt;-<span class="st"> </span>data[data[,<span class="kw">paste</span>(group)]<span class="op">==</span>groups[i],</span>
<span id="cb224-8"><a href="function.html#cb224-8"></a>                    <span class="kw">paste</span>(field)]</span>
<span id="cb224-9"><a href="function.html#cb224-9"></a>    output[i,<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">data.frame</span>(groups[i],</span>
<span id="cb224-10"><a href="function.html#cb224-10"></a>                                <span class="kw">mean</span>(subdata),</span>
<span id="cb224-11"><a href="function.html#cb224-11"></a>                                <span class="kw">sd</span>(subdata))</span>
<span id="cb224-12"><a href="function.html#cb224-12"></a>    }</span>
<span id="cb224-13"><a href="function.html#cb224-13"></a>  }</span></code></pre></div>
<p>Now there was a lot added there and I should explain. The <strong>subdata</strong> object filters down the data to the group we want to evaluate. The <code>output[i,1:3]</code> object updates the output data frame for row <code>i</code> with the group name, the mean of the field within that group, and the standard deviation.</p>
<p>Now this function will run, but there’s still one piece we’re missing. We need to provide a <strong>value</strong>.</p>
<p>In this function, our value we want to use is the <strong>output</strong> object, which is the data frame containing our summary statistics. We can merely add the output reference at the end, outside the control flow:</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="function.html#cb225-1"></a>summary.group &lt;-<span class="st"> </span><span class="cf">function</span>(data,group,field) {</span>
<span id="cb225-2"><a href="function.html#cb225-2"></a>  groups &lt;-<span class="st"> </span><span class="kw">levels</span>(<span class="kw">factor</span>(data[,<span class="kw">paste</span>(group)]))</span>
<span id="cb225-3"><a href="function.html#cb225-3"></a>  output &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">group=</span><span class="kw">character</span>(),</span>
<span id="cb225-4"><a href="function.html#cb225-4"></a>                       <span class="dt">mean=</span><span class="kw">numeric</span>(),</span>
<span id="cb225-5"><a href="function.html#cb225-5"></a>                       <span class="dt">sd=</span><span class="kw">numeric</span>())</span>
<span id="cb225-6"><a href="function.html#cb225-6"></a>  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">length</span>(groups)) {</span>
<span id="cb225-7"><a href="function.html#cb225-7"></a>    subdata &lt;-<span class="st"> </span>data[data[,<span class="kw">paste</span>(group)]<span class="op">==</span>groups[i],</span>
<span id="cb225-8"><a href="function.html#cb225-8"></a>                    <span class="kw">paste</span>(field)]</span>
<span id="cb225-9"><a href="function.html#cb225-9"></a>    output[i,<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>] &lt;-<span class="st"> </span><span class="kw">data.frame</span>(groups[i],</span>
<span id="cb225-10"><a href="function.html#cb225-10"></a>                                <span class="kw">mean</span>(subdata),</span>
<span id="cb225-11"><a href="function.html#cb225-11"></a>                                <span class="kw">sd</span>(subdata))</span>
<span id="cb225-12"><a href="function.html#cb225-12"></a>    }</span>
<span id="cb225-13"><a href="function.html#cb225-13"></a>  output</span>
<span id="cb225-14"><a href="function.html#cb225-14"></a>  }</span></code></pre></div>
<p>If we run this function with the Bond data frame, we’ll get this result:</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="function.html#cb226-1"></a><span class="kw">summary.group</span>(bond,<span class="st">&quot;actor&quot;</span>,<span class="st">&quot;gross&quot;</span>)</span></code></pre></div>
<pre><code>##            group     mean        sd
## 1   Daniel Craig 820.3165 222.57396
## 2 George Lazenby 505.8998      &lt;NA&gt;
## 3 Pierce Brosnan  510.938  30.61869
## 4    Roger Moore 550.8332  177.6345
## 5   Sean Connery 724.8824 213.95672
## 6 Timothy Dalton  333.123  67.83394</code></pre>
</div>
<div id="breaking-down-the-function-we-just-made" class="section level2">
<h2><span class="header-section-number">8.9</span> Breaking Down the Function We Just Made</h2>
<p>This probably is confusing to you since you’re not totally familiar with R control flows yet. It also doesn’t help that you’re still learning how to filter and transform the various object types.</p>
<p>To make it easier, I’m going to show you step-by-step how this function took the Bond data and created this output.</p>
<p>First, the function reviewed the group we defined and created a vector with the members of that group.</p>
<p><img src="1.52_Function_Breakdown.png" width="50%" style="display: block; margin: auto;" /></p>
<p>In this instance, that would include the Bond actors:</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="function.html#cb228-1"></a><span class="kw">levels</span>(<span class="kw">factor</span>(bond[,<span class="st">&quot;actor&quot;</span>]))</span></code></pre></div>
<pre><code>## [1] &quot;Daniel Craig&quot;   &quot;George Lazenby&quot; &quot;Pierce Brosnan&quot; &quot;Roger Moore&quot;   
## [5] &quot;Sean Connery&quot;   &quot;Timothy Dalton&quot;</code></pre>
<p>Second, the function created an empty data frame that will later store the actor names, their mean, and their standard deviation:</p>
<p><img src="1.53_Function_Breakdown.png" width="50%" style="display: block; margin: auto;" /></p>
<p>Our function then started a control flow, which will evaluate each actor’s data to fill the data frame we just created:</p>
<p><img src="1.54_Function_Breakdown.png" width="50%" style="display: block; margin: auto;" /></p>
<p>Next, it filtered the Bond data set down to the first actor:</p>
<p><img src="1.55_Function_Breakdown.png" width="50%" style="display: block; margin: auto;" /></p>
<p>Really, this function filtered the Bond data set in a similar way to the code below:</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="function.html#cb230-1"></a>groups &lt;-<span class="st"> </span><span class="kw">levels</span>(<span class="kw">factor</span>(bond[,<span class="st">&quot;actor&quot;</span>]))</span>
<span id="cb230-2"><a href="function.html#cb230-2"></a>bond[bond[,<span class="st">&quot;actor&quot;</span>]<span class="op">==</span>groups[<span class="dv">1</span>],<span class="st">&quot;gross&quot;</span>]</span></code></pre></div>
<pre><code>## [1] 1108.5610  880.6692  669.7895  622.2464</code></pre>
<p>The function then took the subdata and calculated our summary statistics. This populated the empty data set one by one…</p>
<p><img src="1.56_Function_Breakdown.png" width="50%" style="display: block; margin: auto;" /></p>
<p>…with each new row looked something like this:</p>
<pre><code>##      groups.1. mean.subdata. sd.subdata.
## 1 Daniel Craig      820.3165     222.574</code></pre>
<p>And finally, it displayed the complete data frame once finished with the control flow!</p>
<p><img src="1.57_Function_Breakdown.png" width="50%" style="display: block; margin: auto;" />
## Assigning Functions Outputs a Name</p>
<p>Any objects named within a function are not saved in your R environment. To save the results, you need to assign the executed function a name, like you would with any other object.</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="function.html#cb233-1"></a>bond_eval &lt;-<span class="st"> </span><span class="kw">summary.group</span>(bond,<span class="st">&quot;actor&quot;</span>,<span class="st">&quot;gross&quot;</span>)</span>
<span id="cb233-2"><a href="function.html#cb233-2"></a>bond_eval</span></code></pre></div>
<p>This can apply to any existing functions.</p>
</div>
<div id="things-to-remember-6" class="section level2">
<h2><span class="header-section-number">8.10</span> Things to Remember</h2>
<ul>
<li>Functions are the only object type that modifies other objects</li>
<li>Functions require an argument to execute and typically outputs a value</li>
<li>Packages store various previously built functions that you can utilize</li>
<li>You can build your own functions to suit your R programming needs</li>
<li>Control flows or “loops” are a handy way to automate data management tasks at a granular level</li>
</ul>
</div>
<div id="exercises-1" class="section level2">
<h2><span class="header-section-number">8.11</span> Exercises</h2>
<p>Try to see if you can complete the following exercises. Answers are in the back of the book!</p>
<ol style="list-style-type: decimal">
<li>Modify the simply standard deviation function we wrote and change it to calculate mean. Do this without using the built-in <code>mean</code> function.</li>
<li>Alter the <code>summary.group</code> function to include median, maximum, and minimum values.</li>
<li>Write a function for the <em>Fibonacci Sequence</em>, which ends at a number you choose. You’ll need to use a control flow to accomplish this and a default value for the end of the sequence. (Hint: You won’t use the <code>for(var in seq) expr</code> control flow. Execute <code>?Control</code> to use a different version.)</li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="packages.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="importdata.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/07-functions.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
