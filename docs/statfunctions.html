<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 11 Statistical Functions in R: Common Functions and How They Work | R Programming in Plain English</title>
<meta name="author" content="Taylor Rodgers">
<meta name="description" content="At its core, R programming is a statistical programming language. If you are an R programmer, there’s a good chance you want to make predictions or inferences with data. That’s what we’ll cover in...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Chapter 11 Statistical Functions in R: Common Functions and How They Work | R Programming in Plain English">
<meta property="og:type" content="book">
<meta property="og:url" content="https://github.com/taylorrodgers/taylorrodgers.github.io/statfunctions.html">
<meta property="og:image" content="https://github.com/taylorrodgers/taylorrodgers.github.io/BookCover.png">
<meta property="og:description" content="At its core, R programming is a statistical programming language. If you are an R programmer, there’s a good chance you want to make predictions or inferences with data. That’s what we’ll cover in...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 11 Statistical Functions in R: Common Functions and How They Work | R Programming in Plain English">
<meta name="twitter:description" content="At its core, R programming is a statistical programming language. If you are an R programmer, there’s a good chance you want to make predictions or inferences with data. That’s what we’ll cover in...">
<meta name="twitter:image" content="https://github.com/taylorrodgers/taylorrodgers.github.io/BookCover.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.11/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><link href="libs/_Lato-0.4.0/font.css" rel="stylesheet">
<script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script><script src="libs/plotly-binding-4.10.0/plotly.js"></script><script src="libs/typedarray-0.1/typedarray.min.js"></script><link href="libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="libs/crosstalk-1.2.0/js/crosstalk.min.js"></script><link href="libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="libs/plotly-main-2.5.1/plotly-latest.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="bs4_style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">R Programming in Plain English</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html"><span class="header-section-number">1</span> About This Book</a></li>
<li><a class="" href="whatisr.html"><span class="header-section-number">2</span> What is R Programming?</a></li>
<li><a class="" href="setup.html"><span class="header-section-number">3</span> How to Get Started with R and RStudio</a></li>
<li><a class="" href="objects.html"><span class="header-section-number">4</span> Object Types in R Programming</a></li>
<li><a class="" href="baserfilter.html"><span class="header-section-number">5</span> How to Filter and Transform Objects in Base R</a></li>
<li><a class="" href="dplyr.html"><span class="header-section-number">6</span> How to Filter and Transform Data with the dplyr Package</a></li>
<li><a class="" href="packages.html"><span class="header-section-number">7</span> Understanding and Using R Packages</a></li>
<li><a class="" href="function.html"><span class="header-section-number">8</span> How to Write Functions</a></li>
<li><a class="" href="importdata.html"><span class="header-section-number">9</span> How to Import Data into R</a></li>
<li><a class="" href="plotdata.html"><span class="header-section-number">10</span> How to Plot Data in R</a></li>
<li><a class="active" href="statfunctions.html"><span class="header-section-number">11</span> Statistical Functions in R: Common Functions and How They Work</a></li>
<li><a class="" href="answers.html"><span class="header-section-number">12</span> Answer Key</a></li>
<li><a class="" href="references.html">References</a></li>
<li><a class="" href="about-the-author.html">About the Author</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/taylorrodgers/taylorrodgers.github.io">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="statfunctions" class="section level1" number="11">
<h1>
<span class="header-section-number">11</span> Statistical Functions in R: Common Functions and How They Work<a class="anchor" aria-label="anchor" href="#statfunctions"><i class="fas fa-link"></i></a>
</h1>
<p>At its core, R programming is a statistical programming language. If you are an R programmer, there’s a good chance you want to make predictions or inferences with data. That’s what we’ll cover in this chapter!</p>
<div id="how-statistical-functions-work-in-r-programming" class="section level2" number="11.1">
<h2>
<span class="header-section-number">11.1</span> How Statistical Functions Work in R Programming<a class="anchor" aria-label="anchor" href="#how-statistical-functions-work-in-r-programming"><i class="fas fa-link"></i></a>
</h2>
<p>A great thing about statistical functions in R is that they often follow the same principles. The steps that apply to one function usually applies to others.</p>
<p>Typically, you’ll use a model function (such as <code><a href="https://rdrr.io/r/stats/lm.html">lm()</a></code>) to create a <code>list</code> object. So long as you assign this object a name, you can apply various other functions to it and evaluate its performance.</p>
<p>The common functions you’ll apply to this model object are:</p>
<ol style="list-style-type: decimal">
<li>
<code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code>, which summarizes the model parameter estimates and overall model performance</li>
<li>
<code><a href="https://rdrr.io/r/stats/predict.html">predict()</a></code>, which allows you to see what your model predicts on both existing and new data sets</li>
<li>
<code><a href="https://readr.tidyverse.org/reference/read_rds.html">write_rds()</a></code>, which allows you to save the model file for future use (requires <code>readr</code> package)</li>
<li>
<code><a href="https://rdrr.io/r/stats/anova.html">anova()</a></code>, which allows you to generate an <em>analysis of variance</em> on a single model or compare multiple models</li>
<li>
<code><a href="https://rdrr.io/r/stats/confint.html">confint()</a></code>, which allows you to generate the confidence intervals on your model parameters</li>
</ol>
<p>It’s okay if it’s not clear yet how these concepts work together. I’ll demonstrate them over the next few sections. Keep in mind that even if the model type you want is not covered in this section, these functions apply to <em>most model objects, most of the time.</em></p>
<p>Towards the end of this chapter, I’ll provide some simple examples that walk you through the common statistical functions and models used in research.</p>
</div>
<div id="how-to-build-a-model-in-r-example-with-linear-regression" class="section level2" number="11.2">
<h2>
<span class="header-section-number">11.2</span> How to Build a Model in R (Example with Linear Regression)<a class="anchor" aria-label="anchor" href="#how-to-build-a-model-in-r-example-with-linear-regression"><i class="fas fa-link"></i></a>
</h2>
<p>Let’s say we want to build a model with the <code>mtcars</code> data set. We want a model that uses <strong>disp</strong> to predict <strong>mpg</strong>. If you look at the data set below, we can see the summary statistics for those two columns.</p>
<div class="sourceCode" id="cb285"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"mpg"</span>,<span class="st">"disp"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<pre><code>##       mpg             disp      
##  Min.   :10.40   Min.   : 71.1  
##  1st Qu.:15.43   1st Qu.:120.8  
##  Median :19.20   Median :196.3  
##  Mean   :20.09   Mean   :230.7  
##  3rd Qu.:22.80   3rd Qu.:326.0  
##  Max.   :33.90   Max.   :472.0</code></pre>
<p>In order to build a model, we’ll use the <code><a href="https://rdrr.io/r/stats/lm.html">lm()</a></code> function. To use this function, we only need to define our formula and our data set:</p>
<div class="sourceCode" id="cb287"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="va">mod1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">mpg</span><span class="op">~</span><span class="va">disp</span>,data<span class="op">=</span><span class="va">mtcars</span><span class="op">)</span></code></pre></div>
<p>The formula is defined using a <code>~</code> sign. This basically implies our regression model is “mpg=disp”.</p>
<p>One important thing to note is the type of object this function generates. If you look at the <strong>Environment</strong> pane, you’ll see this object saved as a <code>list</code>.</p>
<div class="inline-figure"><img src="1.66_ModelObject.png" width="75%" style="display: block; margin: auto;"></div>
<p>This list includes many smaller components that come in handy later. Most other modeling functions in R mimic this workflow as well.</p>
</div>
<div id="how-to-review-common-model-performance-statistics" class="section level2" number="11.3">
<h2>
<span class="header-section-number">11.3</span> How to Review Common Model Performance Statistics<a class="anchor" aria-label="anchor" href="#how-to-review-common-model-performance-statistics"><i class="fas fa-link"></i></a>
</h2>
<p>Building a model isn’t that hard, as you can tell. Typically though, the real work lays in model evaluation. Most of these summary statistics can be found using the <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> function:</p>
<div class="sourceCode" id="cb288"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mod1</span><span class="op">)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = mpg ~ disp, data = mtcars)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -4.8922 -2.2022 -0.9631  1.6272  7.2305 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 29.599855   1.229720  24.070  &lt; 2e-16 ***
## disp        -0.041215   0.004712  -8.747 9.38e-10 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 3.251 on 30 degrees of freedom
## Multiple R-squared:  0.7183, Adjusted R-squared:  0.709 
## F-statistic: 76.51 on 1 and 30 DF,  p-value: 9.38e-10</code></pre>
<p>As you can see, this <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> function reveals a lot about how well this model performs. We can see the adjusted R-square, the F-Statistic, and the individual p-value for the parameter estimate.</p>
<p>You might ask why not just call <code>mod1</code>. Why do we have to use the <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> function? You can do that, but it doesn’t give you nearly the same amount of detail.</p>
<div class="sourceCode" id="cb290"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="va">mod1</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = mpg ~ disp, data = mtcars)
## 
## Coefficients:
## (Intercept)         disp  
##    29.59985     -0.04122</code></pre>
<p>The reason will be more clear in a moment. “mod1” is the actual model. While we usually want the <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> output after building the model, there are several other things we want to evaluate. If the output of the <code><a href="https://rdrr.io/r/stats/lm.html">lm()</a></code> function didn’t produce a model, but a summary like we saw, it would be more difficult to apply other functions, such as <code><a href="https://rdrr.io/r/stats/predict.html">predict()</a></code> and <code><a href="https://rdrr.io/r/stats/confint.html">confint()</a></code>, to it.</p>
<p>Also, <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> is a universal function within R. It can also be applied to data frames and vectors. Not just the <code><a href="https://rdrr.io/r/stats/lm.html">lm()</a></code> output.</p>
<div id="its-useful-to-save-the-summary-output" class="section level3" number="11.3.1">
<h3>
<span class="header-section-number">11.3.1</span> It’s Useful to Save the Summary Output<a class="anchor" aria-label="anchor" href="#its-useful-to-save-the-summary-output"><i class="fas fa-link"></i></a>
</h3>
<p>Sometimes, you may want to evaluate one model against another. Whenever that happens, it’s useful to create another object for the summary output of the model. This will allow you to select individual pieces of the output you saw above.</p>
<p>For example, I can create a new list for model 1’s summary. I can then use the <code>$</code> notation to call individual performance indicators for that model, such as <code>adj.r.squared</code> or the <code>fstatistic</code>.</p>
<div class="sourceCode" id="cb292"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="va">mod1_summary</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mod1</span><span class="op">)</span>
  <span class="va">mod1_summary</span><span class="op">$</span><span class="va">adj.r.squared</span>
  <span class="va">mod1_summary</span><span class="op">$</span><span class="va">fstatistic</span></code></pre></div>
<p>You can determine what values are available in a model summary using the <code><a href="https://rdrr.io/r/base/names.html">names()</a></code> function:</p>
<div class="sourceCode" id="cb293"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">mod1_summary</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1] "call"          "terms"         "residuals"     "coefficients" 
##  [5] "aliased"       "sigma"         "df"            "r.squared"    
##  [9] "adj.r.squared" "fstatistic"    "cov.unscaled"</code></pre>
</div>
</div>
<div id="how-to-make-predictions-with-a-model" class="section level2" number="11.4">
<h2>
<span class="header-section-number">11.4</span> How to Make Predictions with a Model<a class="anchor" aria-label="anchor" href="#how-to-make-predictions-with-a-model"><i class="fas fa-link"></i></a>
</h2>
<p>Many researchers are more interested in the “inferential” side of statistics. In plain English, you’re hoping to prove or disprove a relationship between one variable and another. Others time, you may want to use your model to predict future events or outcomes. This is more common for data scientists like me.</p>
<p>You can use the <code><a href="https://rdrr.io/r/stats/predict.html">predict()</a></code> function to make predictions on new data. Actually, you can use this function without new data simply by plugging the model object name in. This will show you what the model predicts using the original data set (which is often a useful model performance indicator on its own).</p>
<div class="sourceCode" id="cb295"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">mod1</span><span class="op">)</span></code></pre></div>
<pre><code>##           Mazda RX4       Mazda RX4 Wag          Datsun 710      Hornet 4 Drive 
##            23.00544            23.00544            25.14862            18.96635 
##   Hornet Sportabout             Valiant          Duster 360           Merc 240D 
##            14.76241            20.32645            14.76241            23.55360 
##            Merc 230            Merc 280           Merc 280C          Merc 450SE 
##            23.79677            22.69220            22.69220            18.23272 
##          Merc 450SL         Merc 450SLC  Cadillac Fleetwood Lincoln Continental 
##            18.23272            18.23272            10.14632            10.64090 
##   Chrysler Imperial            Fiat 128         Honda Civic      Toyota Corolla 
##            11.46520            26.35622            26.47987            26.66946 
##       Toyota Corona    Dodge Challenger         AMC Javelin          Camaro Z28 
##            24.64992            16.49345            17.07046            15.17456 
##    Pontiac Firebird           Fiat X1-9       Porsche 914-2        Lotus Europa 
##            13.11381            26.34386            24.64168            25.68030 
##      Ford Pantera L        Ferrari Dino       Maserati Bora          Volvo 142E 
##            15.13335            23.62366            17.19410            24.61283</code></pre>
<p>Let’s say we have new values for <strong>disp</strong>. We want to see what our model predicts for <strong>mpg</strong> using these new records. All we have to do is specify the model object name and the data set object name in the <code><a href="https://rdrr.io/r/stats/predict.html">predict()</a></code> function:</p>
<div class="sourceCode" id="cb297"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="va">disp_new</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>disp<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">15</span>,<span class="fl">240</span>,<span class="fl">30</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="co">#this simply generates random numbers</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">mod1</span>,<span class="va">disp_new</span><span class="op">)</span></code></pre></div>
<pre><code>##        1        2        3        4        5        6        7        8 
## 21.92072 19.57914 19.62402 18.37712 20.86951 18.68507 20.79849 19.15828 
##        9       10       11       12       13       14       15 
## 17.89549 20.64230 20.99769 17.17329 21.15449 18.20183 19.61650</code></pre>
<p>As you can imagine, this <code><a href="https://rdrr.io/r/stats/predict.html">predict()</a></code> function comes in handy. And it’s a common feature for most model objects produced in other R packages. I’ve used this for neural nets and other more advanced predictive algorithms. It comes up again and again.</p>
</div>
<div id="how-to-save-your-model-to-use-later" class="section level2" number="11.5">
<h2>
<span class="header-section-number">11.5</span> How to Save Your Model to Use Later<a class="anchor" aria-label="anchor" href="#how-to-save-your-model-to-use-later"><i class="fas fa-link"></i></a>
</h2>
<p>It’s quite common to share models between colleagues. Maybe another researcher wants to re-produce what you created or another data scientist will integrate your model into a Shiny app.</p>
<p>That’s where <code>.rds</code> files come in handy.</p>
<p><code>.rds</code> files allow you to save objects on your desktop or user directory for later use.</p>
<p>You’ll need to load the <code>readr</code> package to create these file types. After that, you’ll use the <code><a href="https://readr.tidyverse.org/reference/read_rds.html">write_rds()</a></code> function to create an <code>.rds</code> file and <code><a href="https://readr.tidyverse.org/reference/read_rds.html">read_rds()</a></code> to load it. (You may need to install this package using <code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages()</a></code>.)</p>
<div class="sourceCode" id="cb299"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readr.tidyverse.org">readr</a></span><span class="op">)</span>
  <span class="fu"><a href="https://readr.tidyverse.org/reference/read_rds.html">write_rds</a></span><span class="op">(</span><span class="va">mod1</span>,<span class="st">"mod1.rds"</span><span class="op">)</span></code></pre></div>
<p>After running the previous script, you’ll see an <code>.rds</code> file appear in your current working directory (usually your project directory or your default user directory). You can specify the file path in that script above between the two quotations marks.</p>
<div class="inline-figure"><img src="1.67_ModelRDS.png" width="75%" style="display: block; margin: auto;"></div>
<p>If you want to re-use this model, you can simply reload the <code>.rds</code> file using the <code><a href="https://readr.tidyverse.org/reference/read_rds.html">read_rds()</a></code> function. Be sure to assign this object a name to make it work.</p>
<div class="sourceCode" id="cb300"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="va">model_reload</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_rds.html">read_rds</a></span><span class="op">(</span><span class="st">"mod1.rds"</span><span class="op">)</span></code></pre></div>
<p>And here’s the cool part about this <code>.rds</code> file - <em>you don’t need to reload the original data set to make this new model work!</em> If you feed it new data, it’ll make new predictions. This comes in handy whenever you build Shiny apps or want to “productionalize” the model.</p>
<div class="sourceCode" id="cb301"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="va">disp_new</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>disp<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html">rnorm</a></span><span class="op">(</span><span class="fl">15</span>,<span class="fl">240</span>,<span class="fl">30</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/stats/predict.html">predict</a></span><span class="op">(</span><span class="va">model_reload</span>,<span class="va">disp_new</span><span class="op">)</span></code></pre></div>
<pre><code>##        1        2        3        4        5        6        7        8 
## 20.82545 21.27865 20.16891 19.18273 18.64478 19.26571 19.85724 21.91752 
##        9       10       11       12       13       14       15 
## 17.48599 19.03953 20.60156 20.60352 18.19875 20.04392 20.77241</code></pre>
</div>
<div id="how-to-add-multiple-parameters-to-a-model" class="section level2" number="11.6">
<h2>
<span class="header-section-number">11.6</span> How to Add Multiple Parameters to a Model<a class="anchor" aria-label="anchor" href="#how-to-add-multiple-parameters-to-a-model"><i class="fas fa-link"></i></a>
</h2>
<p>You can add additional parameters to your model by adding to the formula in the <code><a href="https://rdrr.io/r/stats/lm.html">lm()</a></code> function. Let’s say we want to add the <strong>drat</strong> and <strong>wt</strong> variables to your regression model. All you have to do specify both variables with a <code>+</code> sign between them.</p>
<div class="sourceCode" id="cb303"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="va">mod2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">mpg</span><span class="op">~</span><span class="va">disp</span><span class="op">+</span><span class="va">drat</span><span class="op">+</span><span class="va">wt</span>,<span class="va">mtcars</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mod2</span><span class="op">)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = mpg ~ disp + drat + wt, data = mtcars)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -3.2342 -2.3719 -0.3148  1.6315  6.2820 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept) 31.043257   7.099792   4.372 0.000154 ***
## disp        -0.016389   0.009578  -1.711 0.098127 .  
## drat         0.843965   1.455051   0.580 0.566537    
## wt          -3.172482   1.217157  -2.606 0.014495 *  
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 2.951 on 28 degrees of freedom
## Multiple R-squared:  0.7835, Adjusted R-squared:  0.7603 
## F-statistic: 33.78 on 3 and 28 DF,  p-value: 1.92e-09</code></pre>
<p>As you can see above, those variables aren’t necessarily the best addition or combination. But since it’s an example, we won’t worry too much about it here.</p>
</div>
<div id="how-to-add-a-categorical-variable-to-a-model" class="section level2" number="11.7">
<h2>
<span class="header-section-number">11.7</span> How to Add a Categorical Variable to a Model<a class="anchor" aria-label="anchor" href="#how-to-add-a-categorical-variable-to-a-model"><i class="fas fa-link"></i></a>
</h2>
<p>So far, I’ve only shown you how to add <strong>continuous</strong> variables. What if we want to add a <strong>categorical</strong> variable?</p>
<p>If a column in a data frame has character values (i.e., text), a model function will automatically treat it as a categorical variable. If it contains numeric values, we’ll need to make it a <strong>factor</strong>. (Review our chapter on object-types for a quick refresher on this topic.)</p>
<div class="sourceCode" id="cb305"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="va">mod3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">mpg</span><span class="op">~</span><span class="va">disp</span><span class="op">+</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span>,<span class="va">mtcars</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mod3</span><span class="op">)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = mpg ~ disp + factor(cyl), data = mtcars)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -4.8304 -1.5873 -0.5851  0.9753  6.3069 
## 
## Coefficients:
##              Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  29.53477    1.42662  20.703  &lt; 2e-16 ***
## disp         -0.02731    0.01061  -2.574  0.01564 *  
## factor(cyl)6 -4.78585    1.64982  -2.901  0.00717 ** 
## factor(cyl)8 -4.79209    2.88682  -1.660  0.10808    
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 2.95 on 28 degrees of freedom
## Multiple R-squared:  0.7837, Adjusted R-squared:  0.7605 
## F-statistic: 33.81 on 3 and 28 DF,  p-value: 1.906e-09</code></pre>
</div>
<div id="how-to-add-transformed-variables-to-a-model" class="section level2" number="11.8">
<h2>
<span class="header-section-number">11.8</span> How to Add Transformed Variables to a Model<a class="anchor" aria-label="anchor" href="#how-to-add-transformed-variables-to-a-model"><i class="fas fa-link"></i></a>
</h2>
<p>Quite often, you may need to transform your variables to make them work in a model. Let’s say you want to build a log-log model. That has different meanings depending on your field of study, but in econometrics, a log-log model transforms both the inputs and the outputs using the natural logarithm. (This is how they often calculate price elasticity.)</p>
<p>You could simply do these transformations in the formula argument in the <code><a href="https://rdrr.io/r/stats/lm.html">lm()</a></code> function. If you look below, I simply wrap both the independent and dependent variable with the <code><a href="https://rdrr.io/r/base/Log.html">log()</a></code> function:</p>
<div class="sourceCode" id="cb307"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="va">mod4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">mpg</span><span class="op">)</span><span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">disp</span><span class="op">)</span>,<span class="va">mtcars</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mod4</span><span class="op">)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = log(mpg) ~ log(disp), data = mtcars)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -0.22758 -0.08874 -0.00791  0.07970  0.32143 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  5.38097    0.20803   25.87  &lt; 2e-16 ***
## log(disp)   -0.45857    0.03913  -11.72 1.01e-12 ***
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 0.1282 on 30 degrees of freedom
## Multiple R-squared:  0.8207, Adjusted R-squared:  0.8148 
## F-statistic: 137.3 on 1 and 30 DF,  p-value: 1.006e-12</code></pre>
<p>This works okay for smaller models. If you want to transform several variables, it’s usually easier to create new ones in the data set prior to building the model:</p>
<div class="sourceCode" id="cb309"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="va">cars_log</span> <span class="op">&lt;-</span> <span class="va">mtcars</span>
  <span class="va">cars_log</span><span class="op">$</span><span class="va">mpg_log</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">cars_log</span><span class="op">$</span><span class="va">mpg</span><span class="op">)</span>
  <span class="va">cars_log</span><span class="op">$</span><span class="va">disp_log</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">cars_log</span><span class="op">$</span><span class="va">disp</span><span class="op">)</span>
  <span class="va">cars_log</span><span class="op">$</span><span class="va">qsec_log</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log</a></span><span class="op">(</span><span class="va">cars_log</span><span class="op">$</span><span class="va">qsec</span><span class="op">)</span>
  
  <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">cars_log</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">3</span>,<span class="fl">7</span>,<span class="fl">12</span>,<span class="fl">13</span>,<span class="fl">14</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<pre><code>##       mpg             disp            qsec          mpg_log     
##  Min.   :10.40   Min.   : 71.1   Min.   :14.50   Min.   :2.342  
##  1st Qu.:15.43   1st Qu.:120.8   1st Qu.:16.89   1st Qu.:2.736  
##  Median :19.20   Median :196.3   Median :17.71   Median :2.955  
##  Mean   :20.09   Mean   :230.7   Mean   :17.85   Mean   :2.958  
##  3rd Qu.:22.80   3rd Qu.:326.0   3rd Qu.:18.90   3rd Qu.:3.127  
##  Max.   :33.90   Max.   :472.0   Max.   :22.90   Max.   :3.523  
##     disp_log        qsec_log    
##  Min.   :4.264   Min.   :2.674  
##  1st Qu.:4.794   1st Qu.:2.827  
##  Median :5.269   Median :2.874  
##  Mean   :5.285   Mean   :2.877  
##  3rd Qu.:5.786   3rd Qu.:2.939  
##  Max.   :6.157   Max.   :3.131</code></pre>
<p>We can then use those new columns in the model function:</p>
<div class="sourceCode" id="cb311"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="va">mod5</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">mpg_log</span><span class="op">~</span><span class="va">disp_log</span><span class="op">+</span><span class="va">qsec_log</span>,data<span class="op">=</span><span class="va">cars_log</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mod5</span><span class="op">)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = mpg_log ~ disp_log + qsec_log, data = cars_log)
## 
## Residuals:
##      Min       1Q   Median       3Q      Max 
## -0.22998 -0.08890 -0.00661  0.08202  0.32098 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)  5.26474    0.88872   5.924 1.96e-06 ***
## disp_log    -0.45587    0.04454 -10.234 3.89e-11 ***
## qsec_log     0.03544    0.26323   0.135    0.894    
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 0.1303 on 29 degrees of freedom
## Multiple R-squared:  0.8208, Adjusted R-squared:  0.8085 
## F-statistic: 66.43 on 2 and 29 DF,  p-value: 1.486e-11</code></pre>
</div>
<div id="how-to-add-variable-interactions-to-a-model" class="section level2" number="11.9">
<h2>
<span class="header-section-number">11.9</span> How to Add Variable Interactions to a Model<a class="anchor" aria-label="anchor" href="#how-to-add-variable-interactions-to-a-model"><i class="fas fa-link"></i></a>
</h2>
<p>It’s not uncommon to include interactions in your model, especially if you have two variables that seem to be correlated. To create these interactions, you simply use the <code>*</code> between them in the model formula.</p>
<div class="sourceCode" id="cb313"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="va">mod6</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">mpg</span><span class="op">~</span><span class="va">drat</span><span class="op">+</span><span class="va">wt</span><span class="op">+</span><span class="va">drat</span><span class="op">*</span><span class="va">wt</span>,data<span class="op">=</span><span class="va">mtcars</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mod6</span><span class="op">)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = mpg ~ drat + wt + drat * wt, data = mtcars)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -3.8913 -1.8634 -0.3398  1.3247  6.4730 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)  
## (Intercept)    5.550     12.631   0.439   0.6637  
## drat           8.494      3.321   2.557   0.0162 *
## wt             3.884      3.798   1.023   0.3153  
## drat:wt       -2.543      1.093  -2.327   0.0274 *
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 2.839 on 28 degrees of freedom
## Multiple R-squared:  0.7996, Adjusted R-squared:  0.7782 
## F-statistic: 37.25 on 3 and 28 DF,  p-value: 6.567e-10</code></pre>
<p>You actually don’t even need to specify the variables individually. For example, rather than <code>mpg~drat+wt+drat*wt</code>, you can simply use <code>mpg~drat*wt</code> and the function will treat them individually and as interactions.</p>
<div class="sourceCode" id="cb315"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="va">mod6</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">mpg</span><span class="op">~</span><span class="va">drat</span><span class="op">*</span><span class="va">wt</span>,<span class="va">mtcars</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mod6</span><span class="op">)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = mpg ~ drat * wt, data = mtcars)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -3.8913 -1.8634 -0.3398  1.3247  6.4730 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)  
## (Intercept)    5.550     12.631   0.439   0.6637  
## drat           8.494      3.321   2.557   0.0162 *
## wt             3.884      3.798   1.023   0.3153  
## drat:wt       -2.543      1.093  -2.327   0.0274 *
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 2.839 on 28 degrees of freedom
## Multiple R-squared:  0.7996, Adjusted R-squared:  0.7782 
## F-statistic: 37.25 on 3 and 28 DF,  p-value: 6.567e-10</code></pre>
</div>
<div id="how-to-calculate-model-confidence-intervals" class="section level2" number="11.10">
<h2>
<span class="header-section-number">11.10</span> How to Calculate Model Confidence Intervals<a class="anchor" aria-label="anchor" href="#how-to-calculate-model-confidence-intervals"><i class="fas fa-link"></i></a>
</h2>
<p>Even though the p-value tells you whether the variable is statistically significant, it’s often a best practice to include confidence intervals in your analysis. R makes this very easy! Simply wrap the <code><a href="https://rdrr.io/r/stats/confint.html">confint()</a></code> function around your model object.</p>
<div class="sourceCode" id="cb317"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="fu"><a href="https://rdrr.io/r/stats/confint.html">confint</a></span><span class="op">(</span><span class="va">mod2</span><span class="op">)</span></code></pre></div>
<pre><code>##                   2.5 %       97.5 %
## (Intercept) 16.49999311 45.586521444
## disp        -0.03600944  0.003231128
## drat        -2.13657099  3.824501624
## wt          -5.66571478 -0.679250218</code></pre>
<p>If you want to have a different critical value, you can change it using the <strong>level</strong> argument.</p>
<div class="sourceCode" id="cb319"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="fu"><a href="https://rdrr.io/r/stats/confint.html">confint</a></span><span class="op">(</span><span class="va">mod2</span>,level<span class="op">=</span><span class="fl">.9</span><span class="op">)</span></code></pre></div>
<pre><code>##                     5 %          95 %
## (Intercept) 18.96558187  4.312093e+01
## disp        -0.03268312 -9.519212e-05
## drat        -1.63126649  3.319197e+00
## wt          -5.24302525 -1.101940e+00</code></pre>
<p>See <code><a href="https://rdrr.io/r/stats/confint.html">?confint</a></code> to read more about the function.</p>
</div>
<div id="how-to-calculate-analysis-of-variance-between-models" class="section level2" number="11.11">
<h2>
<span class="header-section-number">11.11</span> How to Calculate Analysis of Variance Between Models<a class="anchor" aria-label="anchor" href="#how-to-calculate-analysis-of-variance-between-models"><i class="fas fa-link"></i></a>
</h2>
<p>You’ll often need to compare models with more parameter estimates to simpler ones. To do so, you simply create your two models and then use the <code><a href="https://rdrr.io/r/stats/anova.html">anova()</a></code> function:</p>
<div class="sourceCode" id="cb321"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="fu"><a href="https://rdrr.io/r/stats/anova.html">anova</a></span><span class="op">(</span><span class="va">mod1</span>,<span class="va">mod2</span><span class="op">)</span></code></pre></div>
<pre><code>## Analysis of Variance Table
## 
## Model 1: mpg ~ disp
## Model 2: mpg ~ disp + drat + wt
##   Res.Df    RSS Df Sum of Sq     F  Pr(&gt;F)  
## 1     30 317.16                             
## 2     28 243.75  2    73.405 4.216 0.02509 *
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div id="other-common-model-types---logistic-regression" class="section level2" number="11.12">
<h2>
<span class="header-section-number">11.12</span> Other Common Model Types - Logistic Regression<a class="anchor" aria-label="anchor" href="#other-common-model-types---logistic-regression"><i class="fas fa-link"></i></a>
</h2>
<p>Chances are, you want to do more than a linear regression. Most statistics or ML textbooks will cover the programming steps involved for a particular model type. Those models usually follow the same procedures I highlighted earlier.</p>
<p>That said though, I can provide some general functions used in the more common statistical models, such as logistic regression and anova models.</p>
<p>To run a logistic model, you can use the <code><a href="https://rdrr.io/r/stats/glm.html">glm()</a></code> function. In the script below, I build use <strong>mpg</strong> and <strong>wt</strong> to predict whether <strong>vs</strong> is a 1 or a 0. I use the <code>family</code> argument to make it a logistic model.</p>
<div class="sourceCode" id="cb323"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="va">mod7</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span><span class="op">(</span><span class="va">vs</span><span class="op">~</span><span class="va">mpg</span><span class="op">+</span><span class="va">wt</span>,data<span class="op">=</span><span class="va">mtcars</span>,family<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/family.html">binomial</a></span><span class="op">(</span>link<span class="op">=</span><span class="st">"logit"</span><span class="op">)</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mod7</span><span class="op">)</span></code></pre></div>
<pre><code>## 
## Call:
## glm(formula = vs ~ mpg + wt, family = binomial(link = "logit"), 
##     data = mtcars)
## 
## Deviance Residuals: 
##     Min       1Q   Median       3Q      Max  
## -2.2020  -0.5835  -0.2311   0.5376   1.7142  
## 
## Coefficients:
##             Estimate Std. Error z value Pr(&gt;|z|)  
## (Intercept) -12.5412     8.4660  -1.481   0.1385  
## mpg           0.5241     0.2604   2.012   0.0442 *
## wt            0.5829     1.1845   0.492   0.6227  
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## (Dispersion parameter for binomial family taken to be 1)
## 
##     Null deviance: 43.860  on 31  degrees of freedom
## Residual deviance: 25.298  on 29  degrees of freedom
## AIC: 31.298
## 
## Number of Fisher Scoring iterations: 6</code></pre>
<p>The <code><a href="https://rdrr.io/r/stats/glm.html">glm()</a></code> function has a larger range of model types than the <code><a href="https://rdrr.io/r/stats/lm.html">lm()</a></code> function. I suggest reviewing it with <code><a href="https://rdrr.io/r/stats/glm.html">?glm</a></code> in the console whenever you want to build a particular type of linear model not yet discussed here. The <code>family</code> argument may provide the right model type you need.</p>
<p>Just like we did for the linear regression model, we can use the <code><a href="https://rdrr.io/r/stats/confint.html">confint()</a></code> functions on this model object to generate a confidence interval. You can see this below:</p>
<div class="sourceCode" id="cb325"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="fu"><a href="https://rdrr.io/r/stats/confint.html">confint</a></span><span class="op">(</span><span class="va">mod7</span><span class="op">)</span></code></pre></div>
<pre><code>## Waiting for profiling to be done...</code></pre>
<pre><code>##                    2.5 %   97.5 %
## (Intercept) -31.90842474 2.921046
## mpg           0.09326514 1.165436
## wt           -1.91815266 2.936813</code></pre>
<p>You can also use the <code><a href="https://rdrr.io/r/stats/predict.html">predict()</a></code> function on this model.</p>
</div>
<div id="other-common-model-types---anova-models" class="section level2" number="11.13">
<h2>
<span class="header-section-number">11.13</span> Other Common Model Types - Anova Models<a class="anchor" aria-label="anchor" href="#other-common-model-types---anova-models"><i class="fas fa-link"></i></a>
</h2>
<p>To build an ANOVA model, you’ll use the <code><a href="https://rdrr.io/r/stats/aov.html">aov()</a></code> function. This function follows a similar process to the <code><a href="https://rdrr.io/r/stats/lm.html">lm()</a></code> function and actually generates a regression model using the formula you enter.</p>
<p>As you’ll learn in your stats class, many ANOVA models focus on categorical variables to determine whether there’s a difference in the mean outcome. A common model for this scenario is a <em>fixed-effects model</em>.</p>
<p>Let’s convert a few of our <strong>cars</strong> data into factors, so that we can build a fixed-effects model.</p>
<div class="sourceCode" id="cb328"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="va">mtcars_factor</span> <span class="op">&lt;-</span> <span class="va">mtcars</span>
  <span class="va">mtcars_factor</span><span class="op">$</span><span class="va">gear</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">mtcars_factor</span><span class="op">$</span><span class="va">gear</span><span class="op">)</span>
  <span class="va">mtcars_factor</span><span class="op">$</span><span class="va">vs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">mtcars_factor</span><span class="op">$</span><span class="va">vs</span><span class="op">)</span></code></pre></div>
<p>Remember, most model functions in R will treat numeric inputs as a continuous variable. Since we want to treat these variables (which range includes the labels 0, 1, 3, and 4), we need to ensure that the function we run treats them as categorical. That’s why we factor them.</p>
<p>Now we can build the fixed-effects model using the <code><a href="https://rdrr.io/r/stats/aov.html">aov()</a></code> function:</p>
<div class="sourceCode" id="cb329"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="va">mod8</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/aov.html">aov</a></span><span class="op">(</span><span class="va">mpg</span><span class="op">~</span><span class="va">vs</span><span class="op">+</span><span class="va">gear</span>,data<span class="op">=</span><span class="va">mtcars_factor</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mod8</span><span class="op">)</span></code></pre></div>
<pre><code>##             Df Sum Sq Mean Sq F value   Pr(&gt;F)    
## vs           1  496.5   496.5  29.407 8.74e-06 ***
## gear         2  156.8    78.4   4.642   0.0182 *  
## Residuals   28  472.8    16.9                     
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
<p>The <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> function also gives you the ANOVA table for this model and allows you to determine which group explains the most variation.</p>
<p>Sometimes you still want a model that shows you the actual impact a variable has on the expected output. We can do this by first running the <code><a href="https://rdrr.io/r/stats/lm.html">lm()</a></code> function with our formula.</p>
<div class="sourceCode" id="cb331"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="va">mod9</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html">lm</a></span><span class="op">(</span><span class="va">mpg</span><span class="op">~</span><span class="va">vs</span><span class="op">+</span><span class="va">gear</span>,data<span class="op">=</span><span class="va">mtcars_factor</span><span class="op">)</span>
  <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mod9</span><span class="op">)</span></code></pre></div>
<pre><code>## 
## Call:
## lm(formula = mpg ~ vs + gear, data = mtcars_factor)
## 
## Residuals:
##     Min      1Q  Median      3Q     Max 
## -7.7185 -2.7227  0.2755  1.9300  8.3815 
## 
## Coefficients:
##             Estimate Std. Error t value Pr(&gt;|t|)    
## (Intercept)   14.924      1.124  13.273 1.33e-13 ***
## vs1            5.911      1.863   3.173  0.00364 ** 
## gear4          4.683      1.981   2.364  0.02525 *  
## gear5          5.273      2.122   2.485  0.01919 *  
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1
## 
## Residual standard error: 4.109 on 28 degrees of freedom
## Multiple R-squared:  0.5802, Adjusted R-squared:  0.5352 
## F-statistic:  12.9 on 3 and 28 DF,  p-value: 1.787e-05</code></pre>
<p>And you can reference the model object again in the same <code><a href="https://rdrr.io/r/stats/aov.html">aov()</a></code> function from earlier and get your ANOVA table.</p>
<div class="sourceCode" id="cb333"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">mod8</span><span class="op">)</span></code></pre></div>
<pre><code>##             Df Sum Sq Mean Sq F value   Pr(&gt;F)    
## vs           1  496.5   496.5  29.407 8.74e-06 ***
## gear         2  156.8    78.4   4.642   0.0182 *  
## Residuals   28  472.8    16.9                     
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
<div class="sourceCode" id="cb335"><pre class="downlit sourceCode r">
<code class="sourceCode R">  <span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/aov.html">aov</a></span><span class="op">(</span><span class="va">mod9</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>##             Df Sum Sq Mean Sq F value   Pr(&gt;F)    
## vs           1  496.5   496.5  29.407 8.74e-06 ***
## gear         2  156.8    78.4   4.642   0.0182 *  
## Residuals   28  472.8    16.9                     
## ---
## Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
<div id="things-to-remember-9" class="section level2" number="11.14">
<h2>
<span class="header-section-number">11.14</span> Things to Remember<a class="anchor" aria-label="anchor" href="#things-to-remember-9"><i class="fas fa-link"></i></a>
</h2>
<ul>
<li>Building and evaluating models often follows the same steps, regardless of the functions you use</li>
<li>The model function (<code><a href="https://rdrr.io/r/stats/lm.html">lm()</a></code>, <code><a href="https://rdrr.io/r/stats/glm.html">glm()</a></code>, <code><a href="https://rdrr.io/r/stats/aov.html">aov()</a></code>, etc.) produces a list</li>
<li>You can assign that list a name and reference it again</li>
<li>You can get most model performance metrics with the <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> function</li>
<li>You can use that model object to make predictions on both new and existing data with the <code><a href="https://rdrr.io/r/stats/predict.html">predict()</a></code> function</li>
<li>You can use that model object to generate confidence intervals with the <code><a href="https://rdrr.io/r/stats/confint.html">confint()</a></code>function</li>
<li>You evaluate two models against one another with the <code><a href="https://rdrr.io/r/stats/anova.html">anova()</a></code> function</li>
<li>You can export your model (without exporting the data) using the <code><a href="https://readr.tidyverse.org/reference/read_rds.html">write_rds()</a></code> function</li>
</ul>
</div>
<div id="exercises-6" class="section level2" number="11.15">
<h2>
<span class="header-section-number">11.15</span> Exercises<a class="anchor" aria-label="anchor" href="#exercises-6"><i class="fas fa-link"></i></a>
</h2>
<ol style="list-style-type: decimal">
<li>Using the data set <strong>iris</strong> (<code>data(iris)</code>), build a linear regression model that uses <strong>Sepal.Length</strong> and <strong>Sepal.Width</strong> to predict <strong>Petal.Length</strong>. Assign the model the name “PracticeModel”.</li>
<li>Determine whether the two parameters are statistically significant. (i.e., their p-values are less than 0.05.)</li>
<li>Predict the value of <strong>Petal.Length</strong> with a <strong>Sepal.Length</strong> of 5 and a <strong>Sepal.Width</strong> of 3.25. (Hint: create a single row data frame with those two values assigned to their respective column names.)</li>
<li>Determine the model’s confidence intervals.</li>
</ol>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="plotdata.html"><span class="header-section-number">10</span> How to Plot Data in R</a></div>
<div class="next"><a href="answers.html"><span class="header-section-number">12</span> Answer Key</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#statfunctions"><span class="header-section-number">11</span> Statistical Functions in R: Common Functions and How They Work</a></li>
<li><a class="nav-link" href="#how-statistical-functions-work-in-r-programming"><span class="header-section-number">11.1</span> How Statistical Functions Work in R Programming</a></li>
<li><a class="nav-link" href="#how-to-build-a-model-in-r-example-with-linear-regression"><span class="header-section-number">11.2</span> How to Build a Model in R (Example with Linear Regression)</a></li>
<li>
<a class="nav-link" href="#how-to-review-common-model-performance-statistics"><span class="header-section-number">11.3</span> How to Review Common Model Performance Statistics</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#its-useful-to-save-the-summary-output"><span class="header-section-number">11.3.1</span> It’s Useful to Save the Summary Output</a></li></ul>
</li>
<li><a class="nav-link" href="#how-to-make-predictions-with-a-model"><span class="header-section-number">11.4</span> How to Make Predictions with a Model</a></li>
<li><a class="nav-link" href="#how-to-save-your-model-to-use-later"><span class="header-section-number">11.5</span> How to Save Your Model to Use Later</a></li>
<li><a class="nav-link" href="#how-to-add-multiple-parameters-to-a-model"><span class="header-section-number">11.6</span> How to Add Multiple Parameters to a Model</a></li>
<li><a class="nav-link" href="#how-to-add-a-categorical-variable-to-a-model"><span class="header-section-number">11.7</span> How to Add a Categorical Variable to a Model</a></li>
<li><a class="nav-link" href="#how-to-add-transformed-variables-to-a-model"><span class="header-section-number">11.8</span> How to Add Transformed Variables to a Model</a></li>
<li><a class="nav-link" href="#how-to-add-variable-interactions-to-a-model"><span class="header-section-number">11.9</span> How to Add Variable Interactions to a Model</a></li>
<li><a class="nav-link" href="#how-to-calculate-model-confidence-intervals"><span class="header-section-number">11.10</span> How to Calculate Model Confidence Intervals</a></li>
<li><a class="nav-link" href="#how-to-calculate-analysis-of-variance-between-models"><span class="header-section-number">11.11</span> How to Calculate Analysis of Variance Between Models</a></li>
<li><a class="nav-link" href="#other-common-model-types---logistic-regression"><span class="header-section-number">11.12</span> Other Common Model Types - Logistic Regression</a></li>
<li><a class="nav-link" href="#other-common-model-types---anova-models"><span class="header-section-number">11.13</span> Other Common Model Types - Anova Models</a></li>
<li><a class="nav-link" href="#things-to-remember-9"><span class="header-section-number">11.14</span> Things to Remember</a></li>
<li><a class="nav-link" href="#exercises-6"><span class="header-section-number">11.15</span> Exercises</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/taylorrodgers/taylorrodgers.github.io/blob/main/10-statfunctions.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/taylorrodgers/taylorrodgers.github.io/edit/main/10-statfunctions.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>R Programming in Plain English</strong>" was written by Taylor Rodgers. It was last built on 2022-01-30.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
